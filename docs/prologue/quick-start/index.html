<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://www.cloudhypervisor.org/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://www.cloudhypervisor.org/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://www.cloudhypervisor.org/main.7926a4dce8b9d8b47e80146b7bcf2baad4b7ba4cba8289dd7bfa71ead9c4f2f2dc528359f070da99458dfccb32772ccac7cc80d6209632a2b4f257d40fe21123.css integrity="sha512-eSak3Oi52LR+gBRre88rqtS3uky6gonde/px6tnE8vLcUoNZ8HDamUWN/MsydyzKx8yA1iCWMqK08lfUD+IRIw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Quick Start - Cloud Hypervisor</title><meta name=description content="One page summary of how to get started with Cloud Hypervisor"><link rel=canonical href=https://www.cloudhypervisor.org/docs/prologue/quick-start/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Quick Start"><meta property="og:description" content="One page summary of how to get started with Cloud Hypervisor"><meta property="og:url" content="https://www.cloudhypervisor.org/docs/prologue/quick-start/"><meta property="og:site_name" content="Cloud Hypervisor"><meta property="article:published_time" content="2020-11-16T13:59:39+01:00"><meta property="article:modified_time" content="2020-11-16T13:59:39+01:00"><meta property="og:image" content="https://www.cloudhypervisor.org/doks.png"><meta property="og:image:alt" content="Cloud Hypervisor"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.cloudhypervisor.org/#/schema/organization/1","name":"Cloud Hypervisor","url":"https://www.cloudhypervisor.org/","sameAs":["https://github.com/cloud-hypervisor/cloud-hypervisor"],"logo":{"@type":"ImageObject","@id":"https://www.cloudhypervisor.org/#/schema/image/1","url":"https://www.cloudhypervisor.org/\u003cnil\u003e","width":null,"height":null,"caption":"Cloud Hypervisor"},"image":{"@id":"https://www.cloudhypervisor.org/#/schema/image/1"}},{"@type":"WebSite","@id":"https://www.cloudhypervisor.org/#/schema/website/1","url":"https://www.cloudhypervisor.org/","name":"Cloud Hypervisor","description":"Cloud Hypervisor is an open source Virtual Machine Monitor (VMM) implemented in Rust that focuses on running modern, cloud workloads, with minimal hardware emulation.","publisher":{"@id":"https://www.cloudhypervisor.org/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/","url":"https://www.cloudhypervisor.org/docs/prologue/quick-start/","name":"Quick Start","description":"One page summary of how to get started with Cloud Hypervisor","isPartOf":{"@id":"https://www.cloudhypervisor.org/#/schema/website/1"},"about":{"@id":"https://www.cloudhypervisor.org/#/schema/organization/1"},"datePublished":"2020-11-16T13:59:39CET","dateModified":"2020-11-16T13:59:39CET","breadcrumb":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.cloudhypervisor.org/docs/prologue/quick-start/"]}]},{"@type":"BreadcrumbList","@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://www.cloudhypervisor.org","url":"https://www.cloudhypervisor.org","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://www.cloudhypervisor.org/docs/","url":"https://www.cloudhypervisor.org/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://www.cloudhypervisor.org/docs/prologue/","url":"https://www.cloudhypervisor.org/docs/prologue/","name":"Prologue"}},{"@type":"ListItem","position":5,"item":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://www.cloudhypervisor.org/#/schema/article/1","headline":"Quick Start","description":"One page summary of how to get started with Cloud Hypervisor","isPartOf":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/"},"mainEntityOfPage":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/"},"datePublished":"2020-11-16T13:59:39CET","dateModified":"2020-11-16T13:59:39CET","author":{"@id":"https://www.cloudhypervisor.org/#/schema/person/2"},"publisher":{"@id":"https://www.cloudhypervisor.org/#/schema/organization/1"},"image":{"@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://www.cloudhypervisor.org/#/schema/person/2","name":null,"sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://www.cloudhypervisor.org/docs/prologue/quick-start/#/schema/image/2","url":"https://www.cloudhypervisor.org/doks.png","contentUrl":"https://www.cloudhypervisor.org/doks.png","caption":"Quick Start"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://www.cloudhypervisor.org/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.cloudhypervisor.org/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.cloudhypervisor.org/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://www.cloudhypervisor.org/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=https://www.cloudhypervisor.org/ aria-label="Cloud Hypervisor">Cloud Hypervisor</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://www.cloudhypervisor.org/>Cloud Hypervisor</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=https://www.cloudhypervisor.org/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://www.cloudhypervisor.org/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/cloud-hypervisor/cloud-hypervisor><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://join.slack.com/t/cloud-hypervisor/shared_invite/enQtNjY3MTE3MDkwNDQ4LWQ1MTA1ZDVmODkwMWQ1MTRhYzk4ZGNlN2UwNTI3ZmFlODU0OTcwOWZjMTkwZDExYWE3YjFmNzgzY2FmNDAyMjI><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-slack"><path d="M14.5 10c-.83.0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"/><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/><path d="M9.5 14c.83.0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"/><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"/><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83.0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83.0-1.5-.67-1.5-1.5z"/><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"/><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83.0 1.5-.67 1.5-1.5z"/><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"/></svg><small class="ms-2 d-md-none">Slack</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-prologue aria-expanded=true>
Prologue</button><div class="collapse show" id=section-prologue><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://www.cloudhypervisor.org/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded active" href=https://www.cloudhypervisor.org/docs/prologue/quick-start/>Quick Start</a></li><li><a class="docs-link rounded" href=https://www.cloudhypervisor.org/docs/prologue/commands/>Commands</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-prologue aria-expanded=true>
Prologue</button><div class="collapse show" id=section-prologue><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://www.cloudhypervisor.org/docs/prologue/introduction/>Introduction</a></li><li><a class="docs-link rounded active" href=https://www.cloudhypervisor.org/docs/prologue/quick-start/>Quick Start</a></li><li><a class="docs-link rounded" href=https://www.cloudhypervisor.org/docs/prologue/commands/>Commands</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#setup>Setup</a></li><li><a href=#install-prerequisites>Install prerequisites</a></li><li><a href=#clone-and-build>Clone and build</a><ul><li><a href=#containerized-builds-and-tests>Containerized builds and tests</a></li></ul></li><li><a href=#run>Run</a><ul><li><a href=#cloud-image>Cloud image</a></li><li><a href=#custom-kernel-and-disk-image>Custom kernel and disk image</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Quick Start</h1><p class=lead>One page summary of how to get started with Cloud Hypervisor</p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#setup>Setup</a></li><li><a href=#install-prerequisites>Install prerequisites</a></li><li><a href=#clone-and-build>Clone and build</a><ul><li><a href=#containerized-builds-and-tests>Containerized builds and tests</a></li></ul></li><li><a href=#run>Run</a><ul><li><a href=#cloud-image>Cloud image</a></li><li><a href=#custom-kernel-and-disk-image>Custom kernel and disk image</a></li></ul></li></ul></nav></div></nav><h2 id=setup>Setup <a href=#setup class=anchor aria-hidden=true>#</a></h2><p>We create a folder to build and run <code>cloud-hypervisor</code> at <code>$HOME/cloud-hypervisor</code></p><pre><code class=language-shell>export CLOUDH=$HOME/cloud-hypervisor
# Add this to .bashrc so it is available for subsequent bash sessions
echo &quot;export CLOUDH=$HOME/cloud-hypervisor&quot; &gt;&gt; ~/.bashrc
mkdir $CLOUDH
</code></pre><h2 id=install-prerequisites>Install prerequisites <a href=#install-prerequisites class=anchor aria-hidden=true>#</a></h2><p>You need to install some prerequisite packages in order to build and test Cloud Hypervisor.
Here, all the steps are based on Ubuntu, for other Linux distributions please replace the
package manager and package name.</p><pre><code class=language-shell># Install git
sudo apt install git
# Install rust tool chain
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
# Install build-essential
sudo apt install build-essential
# Install qemu
apt install qemu qemu-utils
</code></pre><p>You will need to restart bash to get <code>rustup</code> into your path, or add it manually.</p><pre><code class=language-shell># If you want to build statically linked binary please add musl target
apt install musl musl-tools
rustup target add x86_64-unknown-linux-musl
</code></pre><h2 id=clone-and-build>Clone and build <a href=#clone-and-build class=anchor aria-hidden=true>#</a></h2><p>First you need to clone and build the cloud-hypervisor repo:</p><pre><code class=language-shell>pushd $CLOUDH
git clone https://github.com/cloud-hypervisor/cloud-hypervisor.git
cd cloud-hypervisor
cargo build --release

# We need to give the cloud-hypervisor binary the NET_ADMIN capabilities for it to set TAP interfaces up on the host.
sudo setcap cap_net_admin+ep ./target/release/cloud-hypervisor

# If you want to build statically linked binary
cargo build --release --target=x86_64-unknown-linux-musl --all
popd
</code></pre><p>This will build a <code>cloud-hypervisor</code> binary under <code>$CLOUDH/cloud-hypervisor/target/release/cloud-hypervisor</code>.</p><h3 id=containerized-builds-and-tests>Containerized builds and tests <a href=#containerized-builds-and-tests class=anchor aria-hidden=true>#</a></h3><p>If you want to build and test Cloud Hypervisor without having to install all the
required dependencies (The rust toolchain, cargo tools, etc), you can also use
Cloud Hypervisor&rsquo;s development script: <code>dev_cli.sh</code>. Please note that upon its
first invocation, this script will pull a fairly large container image.</p><p>For example, to build the Cloud Hypervisor release binary:</p><pre><code class=language-shell>pushd $CLOUDH
cd cloud-hypervisor
./scripts/dev_cli.sh build --release
</code></pre><p>With <code>dev_cli.sh</code>, one can also run the Cloud Hypervisor CI locally. This can be
very convenient for debugging CI errors without having to fully rely on the
Cloud Hypervisor CI infrastructure.</p><p>For example, to run the Cloud Hypervisor unit tests:</p><pre><code class=language-shell>./scripts/dev_cli.sh tests --unit
</code></pre><p>Run the <code>./scripts/dev_cli.sh --help</code> command to view all the supported
development script commands and their related options.</p><h2 id=run>Run <a href=#run class=anchor aria-hidden=true>#</a></h2><p>You can run a guest VM by either using an existing cloud image or booting into your own kernel and disk image.</p><h3 id=cloud-image>Cloud image <a href=#cloud-image class=anchor aria-hidden=true>#</a></h3><p>Cloud Hypervisor supports booting disk images containing all needed
components to run cloud workloads, a.k.a. cloud images. To do that we rely on
the <a href=https://github.com/cloud-hypervisor/rust-hypervisor-firmware>Rust Hypervisor
Firmware</a> project to provide
an ELF
formatted KVM firmware for <code>cloud-hypervisor</code> to directly boot into.</p><p>We need to get the latest <code>rust-hypervisor-firmware</code> release and also a working cloud image. Here we will use a Ubuntu image:</p><pre><code class=language-shell>pushd $CLOUDH
wget https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img
qemu-img convert -p -f qcow2 -O raw focal-server-cloudimg-amd64.img focal-server-cloudimg-amd64.raw
wget https://github.com/cloud-hypervisor/rust-hypervisor-firmware/releases/download/0.3.2/hypervisor-fw
popd
</code></pre><pre><code class=language-shell>pushd $CLOUDH
sudo setcap cap_net_admin+ep ./cloud-hypervisor/target/release/cloud-hypervisor
./cloud-hypervisor/target/release/cloud-hypervisor \
	--kernel ./hypervisor-fw \
	--disk path=focal-server-cloudimg-amd64.raw \
	--cpus boot=4 \
	--memory size=1024M \
	--net &quot;tap=,mac=,ip=,mask=&quot;
popd
</code></pre><p>Multiple arguments can be given to the <code>--disk</code> parameter.</p><h3 id=custom-kernel-and-disk-image>Custom kernel and disk image <a href=#custom-kernel-and-disk-image class=anchor aria-hidden=true>#</a></h3><h4 id=building-your-kernel>Building your kernel <a href=#building-your-kernel class=anchor aria-hidden=true>#</a></h4><p>Cloud Hypervisor also supports direct kernel boot into a <code>vmlinux</code> ELF kernel. In order to support virtio-iommu we have our own development branch. You are of course able to use your own kernel but these instructions will continue with the version that we develop and test against.</p><p>To build the kernel:</p><pre><code class=language-shell>
# Clone the Cloud Hypervisor Linux branch
pushd $CLOUDH
git clone --depth 1 https://github.com/cloud-hypervisor/linux.git -b ch-5.14 linux-cloud-hypervisor
pushd linux-cloud-hypervisor

# Use the cloud-hypervisor kernel config to build your kernel
cp $CLOUDH/cloud-hypervisor/resources/linux-config-x86_64 .config
make bzImage -j `nproc`
popd
</code></pre><p>The <code>vmlinux</code> kernel image will then be located at <code>linux-cloud-hypervisor/arch/x86/boot/compressed/vmlinux.bin</code>.</p><h4 id=disk-image>Disk image <a href=#disk-image class=anchor aria-hidden=true>#</a></h4><p>For the disk image, we will use a Ubuntu cloud image that contains a root partition:</p><pre><code class=language-shell>pushd $CLOUDH
wget https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img
qemu-img convert -p -f qcow2 -O raw focal-server-cloudimg-amd64.img focal-server-cloudimg-amd64.raw
popd
</code></pre><h4 id=booting-the-guest-vm>Booting the guest VM <a href=#booting-the-guest-vm class=anchor aria-hidden=true>#</a></h4><p>Now we can directly boot into our custom kernel and make it use the Ubuntu root partition.
If we want to have 4 vCPUs and 1024 MBytes of memory:</p><pre><code class=language-shell>pushd $CLOUDH
sudo setcap cap_net_admin+ep ./cloud-hypervisor/target/release/cloud-hypervisor
./cloud-hypervisor/target/release/cloud-hypervisor \
	--kernel ./linux-cloud-hypervisor/arch/x86/boot/compressed/vmlinux.bin \
	--disk path=focal-server-cloudimg-amd64.raw \
	--cmdline &quot;console=hvc0 root=/dev/vda1 rw&quot; \
	--cpus boot=4 \
	--memory size=1024M \
	--net &quot;tap=,mac=,ip=,mask=&quot;
</code></pre><p>The above example use the <code>virtio-console</code> device as the guest console, and this
device may not be enabled soon enough by the guest kernel to get early kernel
debug messages.</p><p>When in need for earlier debug messages, using the legacy serial device based
console is preferred:</p><pre><code>./cloud-hypervisor/target/release/cloud-hypervisor \
	--kernel ./linux-cloud-hypervisor/arch/x86/boot/compressed/vmlinux.bin \
	--console off \
	--serial tty \
	--disk path=focal-server-cloudimg-amd64.raw \
	--cmdline &quot;console=ttyS0 root=/dev/vda1 rw&quot; \
	--cpus boot=4 \
	--memory size=1024M \
	--net &quot;tap=,mac=,ip=,mask=&quot;
</code></pre><div class="docs-navigation d-flex justify-content-between"><a href=https://www.cloudhypervisor.org/docs/prologue/introduction/><div class="card my-1"><div class="card-body py-2">&larr; Introduction</div></div></a><a class=ms-auto href=https://www.cloudhypervisor.org/docs/prologue/commands/><div class="card my-1"><div class="card-body py-2">Commands &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Copyright © 2021 Cloud Hypervisor a Series of LF Projects, LLC. For website terms of use, trademark policy, privacy policy and other project policies please see https://lfprojects.org/policies. Rendered with <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://www.cloudhypervisor.org/js/bootstrap.min.592b9faf6c83a2bda564a377cf82f9a67546b198510a93fdb0728f9622ec22729d44be02fb2ea16c3fe5365ae1806259cd111932ca28e68b66462d6937635bab.js integrity="sha512-WSufr2yDor2lZKN3z4L5pnVGsZhRCpP9sHKPliLsInKdRL4C+y6hbD/lNlrhgGJZzREZMsoo5otmRi1pN2Nbqw==" crossorigin=anonymous defer></script>
<script src=https://www.cloudhypervisor.org/js/highlight.min.98ce1374f55ed352eaaf626c7dd6316f3fd26bd9c060cd4f818ae8f6371a5f7ed736199da9164166e3465141306360c666c7646d69d5be11de19a67bff9ef5fe.js integrity="sha512-mM4TdPVe01Lqr2JsfdYxbz/Sa9nAYM1PgYro9jcaX37XNhmdqRZBZuNGUUEwY2DGZsdkbWnVvhHeGaZ7/571/g==" crossorigin=anonymous defer></script>
<script src=https://www.cloudhypervisor.org/main.min.2acb1da4a4a0718f48c53aa27001da913ec631bac23d5ee08b353000845e64e1635ce8a2459dcc670d118412d990328da20c93447a725bf73b84ca5d58bde54f.js integrity="sha512-KssdpKSgcY9IxTqicAHakT7GMbrCPV7gizUwAIReZOFjXOiiRZ3MZw0RhBLZkDKNogyTRHpyW/c7hMpdWL3lTw==" crossorigin=anonymous defer></script>
<script src=https://www.cloudhypervisor.org/index.min.f6ce3c93d4b982b6bc4cdb43cd09de0c7899374b5637a2011df241156305b5c854875e76299ae48ec6bbe49c365c47ee6a38be9a71f53c5dc66571008a6ed2d8.js integrity="sha512-9s48k9S5gra8TNtDzQneDHiZN0tWN6IBHfJBFWMFtchUh152KZrkjsa75Jw2XEfuaji+mnH1PF3GZXEAim7S2A==" crossorigin=anonymous defer></script></body></html>